<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zed.mapper.BillMapper">

    <select id="selectDeptBill" resultType="com.zed.entity.Bill">
        SELECT * from t_bill
        where date = #{date} and t_bill.departmentId
            = (SELECT t_stuinfo.departmentId FROM t_stuinfo
               where t_stuinfo.`name` = #{name})
    </select>

    <select id="selectAllBill" resultType="com.zed.entity.Bill">
        SELECT * from t_bill
        where  t_bill.departmentId
            = (SELECT t_stuinfo.departmentId FROM t_stuinfo
               where t_stuinfo.`name` = #{name})
    </select>

    <select id="editBill" resultType="com.zed.entity.Bill">
        update t_bill
        set departmentId = #{departmentId},
            waterBill = #{waterBill},
            elecBill        = #{elecBill},
            date       = #{date}
        where id = #{id}
    </select>

    <select id="selectBillByCondition" resultType="com.zed.entity.Bill">
        select * from t_bill
        <where>
            <if test="departmentId != null and departmentId !=''">
                and departmentId like #{departmentId}
            </if>

            <if test="date != null and date !=''">
                and `date` = #{date}
            </if>

        </where>
    </select>
</mapper>